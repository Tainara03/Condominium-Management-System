{
  "version": 3,
  "sources": ["angular:jit:template:src\\app\\pages\\perfil\\perfil.component.html", "angular:jit:style:src\\app\\pages\\perfil\\perfil.component.css", "src/app/pages/perfil/perfil.component.ts", "src/app/pages/perfil/perfil.component.spec.ts"],
  "sourcesContent": ["<div class=\"container py-5\">\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-lg-10\">\r\n\r\n      <div class=\"card shadow-lg border-0\">\r\n        <div class=\"card-header text-white text-center py-3 perfil-header\">\r\n          <h4 class=\"mb-0\">Meu Perfil e Dados Cadastrais</h4>\r\n        </div>\r\n        <div class=\"card-body p-4 p-md-5\">\r\n\r\n          <form (ngSubmit)=\"salvarPerfil()\">\r\n            \r\n            <h5 class=\"mb-3\">Informa\u00E7\u00F5es Pessoais</h5>\r\n\r\n            <div class=\"row mb-4 g-3\">\r\n              \r\n              <div class=\"col-md-6\">\r\n                <label for=\"fullName\" class=\"form-label fw-bold\">Nome Completo</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"fullName\" name=\"fullName\" \r\n                       [(ngModel)]=\"perfilData.fullName\" [readonly]=\"!modoEdicao\" required>\r\n              </div>\r\n\r\n              <div class=\"col-md-6\">\r\n                <label for=\"email\" class=\"form-label fw-bold\">E-mail</label>\r\n                <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" \r\n                       [(ngModel)]=\"perfilData.email\" [readonly]=\"!modoEdicao\" required>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-5 g-3\">\r\n              \r\n              <div class=\"col-md-6\">\r\n                <label for=\"phone\" class=\"form-label fw-bold\">Telefone</label>\r\n                <input type=\"tel\" class=\"form-control\" id=\"phone\" name=\"phone\" \r\n                       [(ngModel)]=\"perfilData.phone\" [readonly]=\"!modoEdicao\" required>\r\n              </div>\r\n              \r\n              <div class=\"col-md-6\">\r\n                <label for=\"userType\" class=\"form-label fw-bold\">Tipo de Usu\u00E1rio</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"userType\" name=\"userType\" \r\n                       [(ngModel)]=\"perfilData.userTypeDisplay\" readonly>\r\n                <div class=\"form-text\">O tipo de usu\u00E1rio s\u00F3 pode ser alterado pela administra\u00E7\u00E3o.</div>\r\n              </div>\r\n            </div>\r\n\r\n            <hr class=\"mb-5\">\r\n\r\n            <h5 class=\"mb-3\">Dados da(s) Unidade(s)</h5>\r\n            \r\n            <div class=\"mb-4\">\r\n              \r\n              <ul class=\"list-group mb-3\">\r\n                <li *ngFor=\"let unidade of perfilData.unidades; let i = index\" class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  Bloco: {{ unidade.bloco }} | Apto: {{ unidade.apartment }}\r\n                  \r\n                  <button *ngIf=\"modoEdicao && perfilData.unidades.length > 1\" type=\"button\" class=\"btn btn-sm btn-outline-danger\" (click)=\"removerUnidade(i)\">\r\n                    <i class=\"bi bi-x-lg\"></i>\r\n                  </button>\r\n                </li>\r\n              </ul>\r\n              \r\n              <div *ngIf=\"modoEdicao\" class=\"card p-3 bg-light border\">\r\n                <h6 class=\"mb-3\">Adicionar Nova Unidade</h6>\r\n                <div class=\"row g-2 mb-3\">\r\n                  <div class=\"col-md-5\">\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Novo Bloco (Ex: D)\" \r\n                           [(ngModel)]=\"novaUnidadeTemp.bloco\" name=\"newBlock\" required>\r\n                  </div>\r\n                  <div class=\"col-md-5\">\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Novo Apartamento (Ex: 401)\" \r\n                           [(ngModel)]=\"novaUnidadeTemp.apartment\" name=\"newApartment\" required>\r\n                  </div>\r\n                  <div class=\"col-md-2 d-grid\">\r\n                    <button type=\"button\" class=\"btn btn-success\" (click)=\"adicionarUnidade()\">\r\n                      <i class=\"bi bi-plus-lg\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"mt-3\">\r\n                  <label for=\"comprovanteAnexo\" class=\"form-label\">Anexar Comprovante (para novas unidades/mudan\u00E7as)</label>\r\n                  <input class=\"form-control\" type=\"file\" id=\"comprovanteAnexo\" name=\"novoComprovante\" \r\n                         (change)=\"onComprovanteSelected($event)\">\r\n                  <div class=\"form-text text-danger fw-bold\">Sujeito a aprova\u00E7\u00E3o. Necess\u00E1rio para qualquer altera\u00E7\u00E3o de unidade.</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"d-flex justify-content-end mt-4\">\r\n              \r\n              <button *ngIf=\"!modoEdicao\" type=\"button\" class=\"btn btn-outline-secondary btn-lg\" (click)=\"alternarModoEdicao()\">\r\n                <i class=\"bi bi-pencil-square me-2\"></i> Editar Dados\r\n              </button>\r\n\r\n              <ng-container *ngIf=\"modoEdicao\">\r\n                <button type=\"button\" class=\"btn btn-secondary btn-lg me-3\" (click)=\"cancelarEdicao()\">\r\n                  Cancelar\r\n                </button>\r\n                <button type=\"submit\" class=\"btn btn-marrom btn-lg\">\r\n                  <i class=\"bi bi-save me-2\"></i> Salvar Altera\u00E7\u00F5es\r\n                </button>\r\n              </ng-container>\r\n            </div>\r\n            \r\n          </form>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</div>", "/* src/app/pages/perfil/perfil.component.css */\n.perfil-header {\n  background-color: #FCAA60 !important;\n}\n.text-primary {\n  color: #0d6efd !important;\n}\n.btn-outline-secondary {\n  --bs-btn-color: #6c757d;\n  --bs-btn-border-color: #6c757d;\n  --bs-btn-hover-color: #fff;\n  --bs-btn-hover-bg: #6c757d;\n  --bs-btn-hover-border-color: #6c757d;\n}\n.btn-outline-danger {\n  --bs-btn-color: #dc3545;\n  --bs-btn-border-color: #dc3545;\n  --bs-btn-hover-color: #fff;\n  --bs-btn-hover-bg: #dc3545;\n  --bs-btn-hover-border-color: #dc3545;\n}\n.btn-marrom {\n  background-color: #FCAA60;\n  border-color: #FCAA60;\n  color: #FFF;\n}\n.btn-marrom:hover {\n  background-color: #e59950;\n  border-color: #e59950;\n}\n.btn-marrom:active,\n.btn-marrom:focus {\n  background-color: #d18844 !important;\n  border-color: #d18844 !important;\n  box-shadow: 0 0 0 0.25rem rgba(252, 170, 96, 0.5);\n}\nh5 {\n  color: #FCAA60;\n}\n/*# sourceMappingURL=perfil.component.css.map */\n", "import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { AuthService } from '../../services/auth/auth.service';\r\n\r\ninterface Unidade {\r\n  bloco: string;\r\n  apartment: string;\r\n}\r\n\r\ninterface Perfil {\r\n  fullName: string;\r\n  email: string;\r\n  phone: string;\r\n  userType: 'admin' | 'morador' | 'porteiro' | null;\r\n  userTypeDisplay: string;\r\n  unidades: Unidade[]; \r\n  novoComprovante: File | null; \r\n}\r\n\r\n@Component({\r\n  selector: 'app-perfil',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule],\r\n  templateUrl: './perfil.component.html',\r\n  styleUrls: ['./perfil.component.css']\r\n})\r\nexport class PerfilComponent implements OnInit {\r\n\r\n  modoEdicao: boolean = false; \r\n  perfilData: Perfil = this.getInitialProfileData();\r\n  perfilDataOriginal: Perfil = this.getInitialProfileData();\r\n  novaUnidadeTemp: Unidade = { bloco: '', apartment: '' }; \r\n\r\n  constructor(private authService: AuthService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.carregarDadosDoPerfil();\r\n  }\r\n  \r\n  private getInitialProfileData(): Perfil {\r\n      return {\r\n          fullName: '',\r\n          email: '',\r\n          phone: '',\r\n          userType: null,\r\n          userTypeDisplay: 'Carregando...',\r\n          unidades: [],\r\n          novoComprovante: null\r\n      };\r\n  }\r\n\r\n  carregarDadosDoPerfil(): void {\r\n    const userType = this.authService.getUserType(); \r\n    const userTypeValidated = userType || 'morador'; \r\n    \r\n    const mockData: Perfil = {\r\n      fullName: 'João da Silva',\r\n      email: 'joao.silva@domus.com',\r\n      phone: '11987654321',\r\n      userType: userTypeValidated,\r\n      userTypeDisplay: this.formatUserType(userTypeValidated),\r\n      unidades: [\r\n        { bloco: 'A', apartment: '101' },\r\n        { bloco: 'C', apartment: '204' } \r\n      ], \r\n      novoComprovante: null \r\n    };\r\n\r\n    this.perfilData = { ...mockData };\r\n    this.perfilDataOriginal = { ...mockData };\r\n  }\r\n  \r\n  onComprovanteSelected(event: any): void {\r\n      const file: File = event.target.files[0];\r\n      this.perfilData.novoComprovante = file;\r\n  }\r\n  \r\n  adicionarUnidade(): void {\r\n      if (this.novaUnidadeTemp.bloco && this.novaUnidadeTemp.apartment) {\r\n          this.perfilData.unidades.push({ ...this.novaUnidadeTemp }); \r\n          this.novaUnidadeTemp = { bloco: '', apartment: '' };\r\n      } else {\r\n          alert('Por favor, preencha Bloco e Apartamento.');\r\n      }\r\n  }\r\n\r\n  removerUnidade(index: number): void {\r\n      if (this.perfilData.unidades.length > 1) {\r\n          this.perfilData.unidades.splice(index, 1);\r\n          alert('Unidade marcada para remoção. Salve para confirmar.'); \r\n      } else {\r\n          alert('Você deve ter pelo menos uma unidade registrada.');\r\n      }\r\n  }\r\n\r\n  alternarModoEdicao(): void {\r\n    this.modoEdicao = !this.modoEdicao;\r\n  }\r\n  \r\n  cancelarEdicao(): void {\r\n    this.perfilData = JSON.parse(JSON.stringify(this.perfilDataOriginal)); \r\n    this.modoEdicao = false;\r\n  }\r\n\r\n  salvarPerfil(): void {\r\n    if (!this.modoEdicao) return;\r\n    \r\n    const houveAlteracaoUnidades = JSON.stringify(this.perfilData.unidades) !== JSON.stringify(this.perfilDataOriginal.unidades);\r\n    \r\n    if (houveAlteracaoUnidades && !this.perfilData.novoComprovante) {\r\n        alert('É obrigatório anexar um novo comprovante para alterar/adicionar unidades.');\r\n        return;\r\n    }\r\n\r\n    alert('Alterações enviadas para análise. Você será notificado sobre a aprovação.');\r\n    \r\n    this.perfilDataOriginal = JSON.parse(JSON.stringify(this.perfilData));\r\n    this.perfilData.novoComprovante = null;\r\n    this.modoEdicao = false;\r\n  }\r\n  \r\n  private formatUserType(type: string): string {\r\n      switch (type) {\r\n          case 'admin': return 'Administrador';\r\n          case 'morador': return 'Morador';\r\n          case 'porteiro': return 'Porteiro';\r\n          default: return 'Desconhecido';\r\n      }\r\n  }\r\n}", "import { ComponentFixture, TestBed } from '@angular/core/testing';\r\n\r\nimport { PerfilComponent } from './perfil.component';\r\n\r\ndescribe('PerfilComponent', () => {\r\n  let component: PerfilComponent;\r\n  let fixture: ComponentFixture<PerfilComponent>;\r\n\r\n  beforeEach(async () => {\r\n    await TestBed.configureTestingModule({\r\n      imports: [PerfilComponent]\r\n    })\r\n    .compileComponents();\r\n\r\n    fixture = TestBed.createComponent(PerfilComponent);\r\n    component = fixture.componentInstance;\r\n    fixture.detectChanges();\r\n  });\r\n\r\n  it('should create', () => {\r\n    expect(component).toBeTruthy();\r\n  });\r\n});\r\n"],
  "mappings": "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",
  "names": ["perfil_component_default", "init_perfil_component", "init_perfil_component"]
}
